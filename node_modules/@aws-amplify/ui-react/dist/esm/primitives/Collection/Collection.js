import{__rest as e}from"../../node_modules/tslib/tslib.es6.js";import{jsx as s,jsxs as r}from"react/jsx-runtime";import a from"classnames";import t from"lodash/debounce";import*as i from"react";import{Flex as l}from"../Flex/Flex.js";import{Grid as o}from"../Grid/Grid.js";import{Pagination as n}from"../Pagination/Pagination.js";import{usePagination as c}from"../Pagination/usePagination.js";import{SearchField as m}from"../SearchField/SearchField.js";import{ComponentClassNames as d,ComponentText as h}from"../shared/constants.js";import{strHasLength as g}from"../shared/utils.js";import{getPageCount as p,getItemsAtPage as u,itemHasText as b}from"./utils.js";const j=10,P=r=>{var{children:a,direction:t="column",items:i}=r,o=e(r,["children","direction","items"]);return s(l,Object.assign({direction:t},o,{children:Array.isArray(i)?i.map(a):null}))},f=r=>{var{children:a,items:t}=r,i=e(r,["children","items"]);return s(o,Object.assign({},i,{children:Array.isArray(t)?t.map(a):null}))},C=o=>{var{className:C,isSearchable:y,isPaginated:N,items:O,itemsPerPage:A=j,searchFilter:F=b,searchLabel:S=h.Collection.searchButtonLabel,searchPlaceholder:I,type:v="list",testId:x}=o,L=e(o,["className","isSearchable","isPaginated","items","itemsPerPage","searchFilter","searchLabel","searchPlaceholder","type","testId"]);const[G,k]=i.useState(),B=i.useCallback(t(k,300),[k]);O=Array.isArray(O)?O:[],y&&g(G)&&(O=O.filter((e=>F(e,G))));const _=c({totalPages:p(O.length,A)});N&&(O=u(O,_.currentPage,A));const q="list"===v?s(P,Object.assign({className:d.CollectionItems,items:O},L)):"grid"===v?s(f,Object.assign({className:d.CollectionItems,items:O},L)):null;return r(l,Object.assign({testId:x,className:a(d.Collection,C)},{children:[y?s(l,Object.assign({className:d.CollectionSearch},{children:s(m,{label:S,placeholder:I,onChange:e=>B(e.target.value),onClear:()=>k("")})})):null,q,N?s(l,Object.assign({className:d.CollectionPagination},{children:s(n,Object.assign({},_))})):null]}))};C.displayName="Collection";export{C as Collection};
