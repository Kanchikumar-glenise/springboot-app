"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("@aws-amplify/auth"),a=require("@aws-amplify/core"),r=require("@aws-amplify/datastore"),s=require("@aws-amplify/storage"),o=require("./IconWarning-3289842c.js"),i=require("react/jsx-runtime"),n=require("classnames"),c=require("aws-amplify");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function u(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var r=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,r.get?r:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}require("lodash/isEmpty"),require("lodash/isArray"),require("lodash/isObject"),require("@aws-amplify/ui");var l=u(e),p=d(t),f=d(n);const h=({model:e,criteria:t,pagination:a})=>{const[s,o]=l.useState({items:[],isLoading:!1,error:void 0});return l.useEffect((()=>{o({isLoading:!0,items:[]});const s=r.DataStore.observeQuery(e,t,a).subscribe((e=>o({items:e.items,isLoading:!1})),(e=>o({items:[],error:e,isLoading:!1})));if(s)return()=>s.unsubscribe()}),[]),s},m=({model:e,id:t})=>{const[a,s]=l.useState(),[o,i]=l.useState(!1),[n,c]=l.useState();return l.useEffect((()=>{i(!0),r.DataStore.query(e,t).then(s).catch(c).finally((()=>i(!1)))}),[]),{error:n,item:a,isLoading:o}};const g="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default";const v=({fields:e,modelName:t,schema:a})=>l.useMemo((()=>{if(function(e,t){return!t}(0,a))return e;const r={};return Object.keys(e).forEach((s=>{var o,i,n;const c=e[s];switch(null===(n=null===(i=null===(o=null==a?void 0:a.models[t])||void 0===o?void 0:o.fields)||void 0===i?void 0:i[s])||void 0===n?void 0:n.type){case"AWSTimestamp":case"Float":r[s]=Number(c);break;case"Boolean":r[s]=Boolean(c);break;case"Int":r[s]=parseInt(c);break;default:r[s]=c}})),r}),[e,a,t]),b=e=>e.reduce(((e,t)=>a=>t(e(a))),(e=>e)),y=e=>{const{and:t,or:a,field:r,operator:s,operand:i}=e;if(Array.isArray(t)){const e=t.map((e=>y(e)));return t=>t.and(b(e))}if(Array.isArray(a)){const e=a.map((e=>y(e)));return t=>t.or(b(e))}return e=>o.isFunction(e[r])?e[r].call(e,s,i):e};exports.IconAdd=o.IconAdd,exports.IconCheck=o.IconCheck,exports.IconCheckCircle=o.IconCheckCircle,exports.IconChevronLeft=o.IconChevronLeft,exports.IconChevronRight=o.IconChevronRight,exports.IconClose=o.IconClose,exports.IconError=o.IconError,exports.IconExpandMore=o.IconExpandMore,exports.IconInfo=o.IconInfo,exports.IconMenu=o.IconMenu,exports.IconRemove=o.IconRemove,exports.IconSearch=o.IconSearch,exports.IconStar=o.IconStar,exports.IconVisibility=o.IconVisibility,exports.IconVisibilityOff=o.IconVisibilityOff,exports.IconWarning=o.IconWarning,exports.findChildOverrides=o.findChildOverrides,exports.getOverrideProps=o.getOverrideProps,exports.getOverridesFromVariants=o.getOverridesFromVariants,exports.mergeVariantsAndOverrides=o.mergeVariantsAndOverrides,exports.IconCheckCircleOutline=e=>{const{className:t}=e,a=o.__rest(e,["className"]);return i.jsx(o.View,Object.assign({as:"span",width:"1em",height:"1em",className:f.default(o.ComponentClassNames.Icon,t)},a))},exports.IconFiberManualRecord=e=>{const{className:t}=e,a=o.__rest(e,["className"]);return i.jsx(o.View,Object.assign({as:"span",width:"1em",height:"1em",className:f.default(o.ComponentClassNames.Icon,t)},a))},exports.IconHighlightOff=e=>{const{className:t}=e,a=o.__rest(e,["className"]);return i.jsx(o.View,Object.assign({as:"span",width:"1em",height:"1em",className:f.default(o.ComponentClassNames.Icon,t)},a))},exports.createDataStorePredicate=y,exports.useAuth=()=>{const[e,t]=l.useState({error:void 0,isLoading:!0,user:void 0}),r=({payload:e})=>{switch(e.event){case"signIn":return t({user:e.data,isLoading:!1});case"signOut":return t({isLoading:!1})}},s=()=>(t({isLoading:!0}),p.default.currentAuthenticatedUser().then((e=>t({user:e,isLoading:!1}))).catch((e=>t({error:e,isLoading:!1}))),a.Hub.listen("auth",r),()=>a.Hub.remove("auth",r));return l.useEffect(s,[]),Object.assign(Object.assign({},e),{fetch:s})},exports.useAuthSignOutAction=e=>()=>o.__awaiter(void 0,void 0,void 0,(function*(){try{c.Hub.dispatch("ui",{event:"actions:auth:signout:started",data:{options:e}},"actions:auth:signout",g),yield c.Auth.signOut(e),c.Hub.dispatch("ui",{event:"actions:auth:signout:finished",data:{options:e}},"actions:auth:signout",g)}catch(t){c.Hub.dispatch("ui",{event:"actions:auth:signout:finished",data:{options:e,errorMessage:o.getErrorMessage(t)}},"actions:auth:signout",g)}})),exports.useDataStoreBinding=function(e){return"record"===e.type?m(e):h(e)},exports.useDataStoreCollection=h,exports.useDataStoreCreateAction=({model:e,fields:t,schema:a})=>{const r=v({fields:t,modelName:e.name,schema:a});return()=>o.__awaiter(void 0,void 0,void 0,(function*(){try{c.Hub.dispatch("ui",{event:"actions:datastore:create:started",data:{fields:r}},"actions:datastore:create",g);const t=yield c.DataStore.save(new e(r));c.Hub.dispatch("ui",{event:"actions:datastore:create:finished",data:{fields:r,item:t}},"actions:datastore:create",g)}catch(e){c.Hub.dispatch("ui",{event:"actions:datastore:create:finished",data:{fields:r,errorMessage:o.getErrorMessage(e)}},"actions:datastore:create",g)}}))},exports.useDataStoreDeleteAction=({model:e,id:t})=>()=>o.__awaiter(void 0,void 0,void 0,(function*(){try{c.Hub.dispatch("ui",{event:"actions:datastore:delete:started",data:{id:t}},"actions:datastore:delete",g),yield c.DataStore.delete(e,t),c.Hub.dispatch("ui",{event:"actions:datastore:delete:finished",data:{id:t}},"actions:datastore:delete",g)}catch(e){c.Hub.dispatch("ui",{event:"actions:datastore:delete:finished",data:{id:t,errorMessage:o.getErrorMessage(e)}},"actions:datastore:delete",g)}})),exports.useDataStoreItem=m,exports.useDataStoreUpdateAction=({fields:e,id:t,model:a,schema:r})=>{const s=v({fields:e,modelName:a.name,schema:r});return()=>o.__awaiter(void 0,void 0,void 0,(function*(){try{c.Hub.dispatch("ui",{event:"actions:datastore:update:started",data:{fields:s,id:t}},"actions:datastore:update",g);const e=yield c.DataStore.query(a,t);if(!e)throw new Error(`Error querying datastore item by id: ${t}`);const r=yield c.DataStore.save(a.copyOf(e,(e=>{Object.assign(e,s)})));c.Hub.dispatch("ui",{event:"actions:datastore:update:finished",data:{fields:s,id:t,item:r}},"actions:datastore:update",g)}catch(e){c.Hub.dispatch("ui",{event:"actions:datastore:update:finished",data:{fields:s,id:t,errorMessage:o.getErrorMessage(e)}},"actions:datastore:update",g)}}))},exports.useNavigateAction=e=>{const{type:t,url:a,anchor:r,target:s}=e,o=l.useMemo((()=>{switch(t){case"url":return()=>{window.open(a,s||"_self","noopener noreferrer")};case"anchor":return()=>{window.location.hash=r};case"reload":return()=>{window.location.reload()};default:return()=>{console.warn('Please provide a valid navigate type. Available types are "url", "anchor" and "reload".')}}}),[r,s,t,a]);return()=>{c.Hub.dispatch("ui",{event:"actions:core:navigate:started",data:e},"actions:core:navigate",g),o(),c.Hub.dispatch("ui",{event:"actions:core:navigate:finished",data:e},"actions:core:navigate",g)}},exports.useStateMutationAction=e=>{const[t,a]=l.useState(e),r=l.useCallback((e=>{const r=t;c.Hub.dispatch("ui",{event:"actions:core:statemutation:started",data:{prevState:r,newState:e}},"actions:core:statemutation",g),a(e),c.Hub.dispatch("ui",{event:"actions:core:statemutation:finished",data:{prevState:r,newState:e}},"actions:core:statemutation",g)}),[t]);return[t,r]},exports.useStorageURL=(e,t)=>{const[a,r]=l.useState({isLoading:!0}),o=JSON.stringify(t),i=()=>{r({isLoading:!0});const a=s.Storage.get(e,t);return a.then((e=>r({url:e,isLoading:!1}))).catch((e=>r({error:e,isLoading:!1}))),()=>s.Storage.cancel(a)};return l.useEffect(i,[e,t,o]),Object.assign(Object.assign({},a),{fetch:i})};
